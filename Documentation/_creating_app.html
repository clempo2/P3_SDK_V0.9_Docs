<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>P3-SDK: Creating Your App</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">P3-SDK<span id="projectnumber">&#160;0.9</span>
   </div>
   <div id="projectbrief">P3 Software Development Kit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('_creating_app.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Creating Your App </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__docs_242_01_creating_app"></a></p>
<h1 class="doxsection"><a class="anchor" id="ChoosingAppCode"></a>
Choosing Your AppCode</h1>
<p>Pinball games often have an abbreviated nickname for brevity. You may have encountered these abbreviations in pinball forum discussions. For example, Lexy Lightspeed Escape From Earth is also known as LLEE. For a P3 app, this abbreviation is called the AppCode. You will need to choose an AppCode for your app. It will be used as your application's brief name and as a prefix for some class names within your code, so choose wisely. For the P3 Application Sample, the app code is P3SA. Note: Because the app code will be the prefix for several classes, it must be alphanumeric and must start with a letter.</p>
<p>Throughout this document you will find references to classes or prefabs or game objects whose names are prefixed with P3SA (e.g. P3SASceneController or P3SAPopupScore). For your app, "P3SA" will be replaced by your AppCode (in the <a class="el" href="#CreatingYourProject">next section</a>). When reading this document, you can substitute your AppCode when you read "P3SA".</p>
<h1 class="doxsection"><a class="anchor" id="CreatingYourProject"></a>
Creating Your Project</h1>
<p>This is where we start creating your app for the P3. You'll need a Unity project, and the best place to start is with a copy of the P3SA project. Start by making a complete copy of the P3SA folder. Rename the folder to something meaningful - your chosen AppCode would be a good choice.</p>
<p>Start Unity, and select Open a Project. Select your new app folder. You now have an app, but it still has P3SA written all over it.</p>
<p>Now we'll apply your AppCode throughout your app, replacing P3SA with your AppCode. In the menus, select Multimorphic / Rename a P3 project. You'll see the current company is Multimorphic and the AppCode is P3SA. Enter your company name and AppCode. Click OK to start the process that goes through all the assets in the project and renames P3SA to your AppCode, including namespaces, classes, prefabs and folders. This may take a minute.</p>
<p>When it's complete, go to the Assets/Scenes folder and double click on the Bootstrap scene.</p>
<p>You now have your own basic functional P3 app, ready to be tested in the simulator. If you press the play button (â–º) in Unity, your app will start in the Game window. Of course, it still looks like P3SA, but internally everything is ready for you to add your own content.</p>
<h1 class="doxsection"><a class="anchor" id="AppConfiguration"></a>
Configuring Your Application</h1>
<p>A JSON file named "AppConfig.json" contains configuration details for your game app, including various options that determine how the app will execute. This file also defines the key bindings for triggering mapped switches while simulating your game in Unity, as well as optional default switch states so you can force the virtual hardware to specific startup states (ie. telling the trough it has balls in it by setting the trough switches active).</p>
<p>Available AppConfig.json fields:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Field  </th><th class="markdownTableHeadLeft">Type  </th><th class="markdownTableHeadLeft">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Name  </td><td class="markdownTableBodyLeft">string  </td><td class="markdownTableBodyLeft">Name of application.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ModuleID  </td><td class="markdownTableBodyLeft">string  </td><td class="markdownTableBodyLeft">This determines which upper playfield module hardware configuration file is used when simulating the app. It is not used for anything when running the app on real P3 hardware.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">recordEvents  </td><td class="markdownTableBodyLeft">bool  </td><td class="markdownTableBodyLeft">Whether to record all switch events into a file so they can be played back later? true or false.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">eventRecordingFilenameBase  </td><td class="markdownTableBodyLeft">string  </td><td class="markdownTableBodyLeft">Basename of filename that will hold the recorded switch events. A timestamp will get appended to the filename. Only used if recordEvents is true.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">playbackEvents  </td><td class="markdownTableBodyLeft">bool  </td><td class="markdownTableBodyLeft">Whether to play events back from a file containing recorded events? true or false.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">playbackRate  </td><td class="markdownTableBodyLeft">float  </td><td class="markdownTableBodyLeft">Rate at which to play events back, 1.0 is normal speed, less than 1.0 is slower, greater than 1.0 is faster.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">eventPlaybackFilename  </td><td class="markdownTableBodyLeft">string  </td><td class="markdownTableBodyLeft">Full filename of the file to read recorded switch events from. Only used if playbackEvents is true.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">KeySwitchMaps  </td><td class="markdownTableBodyLeft">Dictionary  </td><td class="markdownTableBodyLeft">Dictionary of maps of Unity KeyCodes to P3 Switch names or any of the 3 event types (ModeToModeEvent, ModeToGUIEvent, GUIToModeEvent). Switch events are posted according to the keyboard button state (down:closed, up:open). The other events are posted once when the keyboard button is released.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">DefaultSimSwitchStates  </td><td class="markdownTableBodyLeft">Dictionary  </td><td class="markdownTableBodyLeft">Dictionary of P3 Switch names and whether or not they should default to active in simulations.  </td></tr>
</table>
<p>The Data field results in an "object" type. To retrieve the value, the event handler must cast to the exact type the object is holding. Here is a table of the data types in JSON and the C# type the object can be cast to: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">JSON Type  </th><th class="markdownTableHeadLeft">JSON Example  </th><th class="markdownTableHeadLeft">C# Type  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">String  </td><td class="markdownTableBodyLeft">"abc"  </td><td class="markdownTableBodyLeft">string  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Integer  </td><td class="markdownTableBodyLeft">4  </td><td class="markdownTableBodyLeft">long  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Float  </td><td class="markdownTableBodyLeft">4.0  </td><td class="markdownTableBodyLeft">double  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Null  </td><td class="markdownTableBodyLeft">null  </td><td class="markdownTableBodyLeft">any object  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Boolean  </td><td class="markdownTableBodyLeft">true  </td><td class="markdownTableBodyLeft">bool  </td></tr>
</table>
<p>When posting non-switch events from the keyboard and the event handler expects an unsupported type (like int, float, char, array or structured objects), it is recommended to post to an intermediate event with a numeric index. Then implement a generic handler in your game that uses the index to decide which actual event to post and what data to send through the event.</p>
<p>Note: Unity listens for the key code, which corresponds to the physical keys on the keyboard, regardless whether the Shift key is held. For example, pressing the A key means typing lowercase a. Conversely, it is not possible to define a mapping here for the Dollar key because that's the Alpha4 key.</p>
<p>Here's a sample "AppConfig.json" file showing the available options: </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;Name&quot;: &quot;sample&quot;,</div>
<div class="line">  &quot;ModuleID&quot;: &quot;CCR&quot;,</div>
<div class="line">  &quot;recordEvents&quot;: false,</div>
<div class="line">  &quot;eventRecordingFilenameBase&quot;: &quot;sample_recording&quot;,</div>
<div class="line">  &quot;playbackEvents&quot;: false,</div>
<div class="line">  &quot;playbackRate&quot;: 1,</div>
<div class="line">  &quot;eventPlaybackFilename&quot;: &quot;sample_recording.txt&quot;,</div>
<div class="line">  &quot;KeySwitchMaps&quot;: [</div>
<div class="line">    {&quot;Key&quot;:&quot;Q&quot;,               &quot;Switch&quot;:&quot;buttonLeft2&quot;},</div>
<div class="line">    {&quot;Key&quot;:&quot;A&quot;,               &quot;Switch&quot;:&quot;buttonLeft0&quot;},</div>
<div class="line">    {&quot;Key&quot;:&quot;Z&quot;,               &quot;Switch&quot;:&quot;buttonLeft1&quot;},</div>
<div class="line">    {&quot;Key&quot;:&quot;P&quot;,               &quot;Switch&quot;:&quot;buttonRight2&quot;},</div>
<div class="line">    {&quot;Key&quot;:&quot;Semicolon&quot;,       &quot;Switch&quot;:&quot;buttonRight0&quot;},</div>
<div class="line">    {&quot;Key&quot;:&quot;Slash&quot;,           &quot;Switch&quot;:&quot;buttonRight1&quot;},</div>
<div class="line">    {&quot;Key&quot;:&quot;LeftBracket&quot;,     &quot;Switch&quot;:&quot;coinDoor&quot;, &quot;Inverted&quot;:true},</div>
<div class="line">    {&quot;Key&quot;:&quot;S&quot;,               &quot;Switch&quot;:&quot;start&quot;},</div>
<div class="line">    {&quot;Key&quot;:&quot;L&quot;,               &quot;Switch&quot;:&quot;launch&quot;},</div>
<div class="line">    {&quot;Key&quot;:&quot;T&quot;,               &quot;Switch&quot;:&quot;tilt&quot;},</div>
<div class="line">    {&quot;Key&quot;:&quot;Alpha0&quot;,          &quot;Switch&quot;:&quot;drain&quot;},</div>
<div class="line">    {&quot;Key&quot;:&quot;Alpha1&quot;,          &quot;Switch&quot;:&quot;money0&quot;},</div>
<div class="line">    {&quot;Key&quot;:&quot;Alpha2&quot;,          &quot;Switch&quot;:&quot;money1&quot;},</div>
<div class="line">    {&quot;Key&quot;:&quot;Alpha3&quot;,          &quot;Switch&quot;:&quot;money2&quot;},</div>
<div class="line">    {&quot;Key&quot;:&quot;I&quot;,               &quot;ModeToModeEvent&quot;:&quot;Evt_M2M&quot;, &quot;Data&quot;:4},</div>
<div class="line">    {&quot;Key&quot;:&quot;J&quot;,               &quot;ModeToGUIEvent&quot;:&quot;Evt_M2G&quot;, &quot;Data&quot;:&quot;StringData&quot;},</div>
<div class="line">    {&quot;Key&quot;:&quot;K&quot;,               &quot;GUIToModeEvent&quot;:&quot;Evt_G2M&quot;, &quot;Data&quot;:true}</div>
<div class="line">  ],</div>
<div class="line">  &quot;DefaultSimSwitchStates&quot;: [</div>
<div class="line">    {&quot;Switch&quot;:&quot;coinDoor&quot;,     &quot;Active&quot;: true},</div>
<div class="line">    {&quot;Switch&quot;:&quot;trough0&quot;,      &quot;Active&quot;: true},</div>
<div class="line">    {&quot;Switch&quot;:&quot;trough2&quot;,      &quot;Active&quot;: true},</div>
<div class="line">    {&quot;Switch&quot;:&quot;trough4&quot;,      &quot;Active&quot;: true},</div>
<div class="line">    {&quot;Switch&quot;:&quot;trough6&quot;,      &quot;Active&quot;: true},</div>
<div class="line">    {&quot;Switch&quot;:&quot;trough8&quot;,      &quot;Active&quot;: true},</div>
<div class="line">    {&quot;Switch&quot;:&quot;trough10&quot;,     &quot;Active&quot;: true},</div>
<div class="line">    {&quot;Switch&quot;:&quot;trough12&quot;,     &quot;Active&quot;: true},</div>
<div class="line">    {&quot;Switch&quot;:&quot;trough14&quot;,     &quot;Active&quot;: true}</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="HardwareMapping"></a>
Mapping To Hardware</h1>
<p>When running an app on the P3, the app needs to know specifics about the P3 hardware so it can properly control the hardware features. This is handled with JSON configuration files that contain names, address information, and various parameters for the physical features in the game (switches, coils, motors, LEDs, etc). The JSON file for each playfield module is created by the playfield developer. See <a class="el" href="_creating_playfield_module.html#PlayfieldModuleDefinitionFile">Module Definition File</a> for the description of this file. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
