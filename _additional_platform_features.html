<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>P3-SDK: Additional Platform Features</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">P3-SDK<span id="projectnumber">&#160;0.9</span>
   </div>
   <div id="projectbrief">P3 Software Development Kit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('_additional_platform_features.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Additional Platform Features </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__docs_282_01_additional_01_platform_01_features"></a></p>
<h1 class="doxsection"><a class="anchor" id="FeatureMenu"></a>
Feature Menu</h1>
<p>P3 games can optionally enable a Feature Menu to give players access to various features to enhance their playing experience. The Feature Menu is intended to be accessible in the same way by players in any app (when enabled). That is by holding down either flipper button and hitting the start button. Alternatively, an app can bring up the Feature Menu at any time by posting "Evt_ShowFeatureMenu", though the contents are mostly relevant in AttractMode and when launch is pending in HomeMode.</p>
<p>The Feature Menu and many of the features it contains can be enabled/disabled through GameAttributes. App developers can choose to allow operators to control accessibility of many of the features, or they can hide any/all of these GameAttributes by setting the GameAttribute options to Hidden in the SettingsMode (attr.Options |= GameAttributeOptions.Hidden).</p>
<p>The entire Feature Menu can be enabled/disabled by controlling GameAttribute "FeatureMenuEnabled"</p>
<div class="fragment"><div class="line">// To enable access to the feature menu</div>
<div class="line">data.GetGameAttributeValue(&quot;FeatureMenuEnabled&quot;).Set(true);</div>
<div class="line"> </div>
<div class="line">// To disable access to the feature menu</div>
<div class="line">data.GetGameAttributeValue(&quot;FeatureMenuEnabled&quot;).Set(false);</div>
</div><!-- fragment --><p>When enabled, the Feature Menu is available when data.ball == 0 or when gameState == GameState.LaunchPending. It's an app's responsibility to change the gameState to GameState.BallInPlay when a ball is launched (usually in HomeMode.BallStartCompleteEventHandler()) and back to GameState.LaunchPending at the start of the next ball (usually in HomeMode.StartPlaying()).</p>
<div class="fragment"><div class="line">PostModeEventToModes(&quot;Evt_ChangeGameState&quot;, GameState.LaunchPending);</div>
<div class="line">PostModeEventToModes(&quot;Evt_ChangeGameState&quot;, GameState.BallInPlay);</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="PlayerProfiles"></a>
Player Profiles</h2>
<p>Player profiles allow players to effectively log into the game and access profile-specific features, like profile-specific game settings, team games, save/restore game state, etc.</p>
<div class="fragment"><div class="line">// To get the profile name for player x.  Will return &quot;PlayerNotInGame&quot; if x &gt;= the number of players in the game.</div>
<div class="line">data.GetPlayerName(x);</div>
<div class="line">// To get the profile name for player x.  Will return &quot;Player &quot; + (x+1).ToString() if the player is not logged in as a profile.  Otherwise it will return &quot;N/A&quot;.</div>
<div class="line">data.GetPlayerName(x, true);</div>
</div><!-- fragment --><p>There are a number of GameAttributes that determine how profile-related features and menus work. See the <a class="el" href="_persistent_data.html#FeatureMenuGameAttributes">Feature Menu Configuration</a> section for specifics.</p>
<h3 class="doxsection"><a class="anchor" id="PlayerProfileSettings"></a>
Player-specific Settings</h3>
<p>Certain GameAttributes can be customized per profile, allowing people to play games with settings tailored to their skill level or desired configuration. To create such a GameAttribute, include the GameAttributeOptions.ProfileOption in the options parameter of the GameAttribute.</p>
<p>Example from P3SASettingsMode: </p><div class="fragment"><div class="line">InitAttr(37, &quot;SideTargetDifficulty&quot;, &quot;Side Target Difficulty&quot;, &quot;Side Target Difficulty&quot;, &quot;Service Menu/Settings/Gameplay/General&quot;, PRW, 0, 0, 2, 1, 0);</div>
</div><!-- fragment --><p>The example above sets the Option parameter to "PRW", which is a constant defined in the base <a class="el" href="class_multimorphic_1_1_p3_app_1_1_modes_1_1_data_1_1_settings_mode.html">SettingsMode</a> as follows: </p><div class="fragment"><div class="line">protected const GameAttributeOptions PRW = GameAttributeOptions.ProfileOption;</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="EventBasedPlayerProfileManagement"></a>
Player Profile Events</h3>
<p>If you want to access player profiles in your game without using the Feature Menu, you can issue the following ModeToMode events:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Event Name  </th><th class="markdownTableHeadLeft">Parameter Type  </th><th class="markdownTableHeadLeft">Parameter Meaning  </th><th class="markdownTableHeadLeft">Event Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Evt_ChooseProfile  </td><td class="markdownTableBodyLeft">bool  </td><td class="markdownTableBodyLeft">Active profile upon choice  </td><td class="markdownTableBodyLeft">Bring up the profile selection menu  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Evt_ActivateProfile  </td><td class="markdownTableBodyLeft">string  </td><td class="markdownTableBodyLeft">Profile name  </td><td class="markdownTableBodyLeft">Activate the specified profile by name  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Evt_ChangeProfile  </td><td class="markdownTableBodyLeft">string  </td><td class="markdownTableBodyLeft">Profile name  </td><td class="markdownTableBodyLeft">Change the active player to a new profile  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Evt_DeleteProfile  </td><td class="markdownTableBodyLeft">string  </td><td class="markdownTableBodyLeft">Profile name  </td><td class="markdownTableBodyLeft">Delete the specified profile  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Evt_EditProfileSettings  </td><td class="markdownTableBodyLeft">string  </td><td class="markdownTableBodyLeft">Profile name  </td><td class="markdownTableBodyLeft">Bring up the operator settings for the specified profile  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Evt_ResetProfile  </td><td class="markdownTableBodyLeft">string  </td><td class="markdownTableBodyLeft">Profile name  </td><td class="markdownTableBodyLeft">Reset the specified profile as if it were being created for the first time in this app  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Evt_GetListOfProfileNames  </td><td class="markdownTableBodyLeft">any  </td><td class="markdownTableBodyLeft">N/A  </td><td class="markdownTableBodyLeft">Request the names of available profiles. The results are posted as ModeToMode event "Evt_ListOfProfileNames" with a List of strings (List&lt;string&gt;)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Evt_AddProfile  </td><td class="markdownTableBodyLeft">string  </td><td class="markdownTableBodyLeft">Profile name  </td><td class="markdownTableBodyLeft">Create a new profile with the specified name  </td></tr>
</table>
<p>If you want to request a new name be entered, the following code will do it:</p>
<div class="fragment"><div class="line">protected void PromptForNewProfileName()</div>
<div class="line">{</div>
<div class="line">    SetSelectorData(&quot;ProfileNameTextSelector&quot;, new TextSelectorData(&quot;Enter profile name&quot;, new List&lt;string&gt;(), &quot;&quot;));</div>
<div class="line">    OpenDialog(&quot;ProfileNameEditor&quot;);</div>
<div class="line">    AddModeEventHandler(&quot;Evt_ProfileNameEntryCompleted&quot;, NameEnteredEventHandler, Priority);</div>
<div class="line">    AddModeEventHandler(&quot;Evt_ProfileNameEntryCancelled&quot;, NameCancelledEventHandler, Priority);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">private bool NameEnteredEventHandler(string evtName, object evtData)</div>
<div class="line">{</div>
<div class="line">    string newName = (string)evtData;</div>
<div class="line">    newName = newName.Trim();</div>
<div class="line">    RemoveModeEventHandler(&quot;Evt_ProfileNameEntryCompleted&quot;, NameEnteredEventHandler, Priority);</div>
<div class="line">    CloseDialog(&quot;ProfileNameEditor&quot;);</div>
<div class="line">    return SWITCH_CONTINUE;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">private bool NameCancelledEventHandler(string evtName, object evtData)</div>
<div class="line">{</div>
<div class="line">    RemoveModeEventHandler(&quot;Evt_ProfileNameEntryCompleted&quot;, NameEnteredEventHandler, Priority);</div>
<div class="line">    RemoveModeEventHandler(&quot;Evt_ProfileNameEntryCancelled&quot;, NameCancelledEventHandler, Priority);</div>
<div class="line">    CloseDialog(&quot;ProfileNameEditor&quot;);</div>
<div class="line">    return SWITCH_CONTINUE;</div>
<div class="line">}</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="TeamGames"></a>
Team Games</h3>
<p>When enabled, team games allow multiple players (and even groups of players in the same game) to play cooperatively. All players playing under the same profile name will play on the same team. Players on the same team will share the same player data. For example, if players 1 and 3 are on the same team, data.Players[2].GetData("Score", 0L) will return the same value as data.Players[0].GetData("Score", 0L). This allows players to help each other progress through a game and/or team up against another player or team.</p>
<p>Team games are enabled/disabled with GameAttribute: "TeamGamesAllowed"</p>
<h3 class="doxsection"><a class="anchor" id="SaveRestore"></a>
Save/Restore State</h3>
<p>Saving/Restoring state can allow players to save their state and later start a new game that starts where they previously left off (relative to game progress, not the number of balls they've played). Players can restore state before launching their first ball, and they can save state before plunging subsequent balls.</p>
<p>Saving/Restoring state is enabled/disabled with GameAttribute: "SaveRestoreStateAllowed";</p>
<h2 class="doxsection"><a class="anchor" id="Bluetooth"></a>
Bluetooth Connections</h2>
<p>Bluetooth connection options are listed in the Feature Menu if the Global Setting "BluetoothEnabled" is true.</p>
<h1 class="doxsection"><a class="anchor" id="RestartsAndRemovingPlayers"></a>
Restarts and Removing Players</h1>
<h2 class="doxsection"><a class="anchor" id="PlayerRemoval"></a>
Player Removal</h2>
<p>If the "AllowPlayerRemoval" GameAttribute is true and data.ball == 1, then players can be removed from the game. If a player is currently playing, player numbers greater than the current player can be removed by holding the start button for 2s, starting with the last player added. If launch is pending (gameState == GameState.LaunchPending), then even the current player can be removed. When player removal is possible, the Feature Menu will include an option to remove a player.</p>
<h2 class="doxsection"><a class="anchor" id="SoftRestarts"></a>
Soft Restarts</h2>
<p>When the "SoftRestartEnabled" GameAttribute is true, active games can be aborted after the first ball by either holding down the start button for 2s or by selecting the Abort Game option in the Feature Menu. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
